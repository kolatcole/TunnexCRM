2020-10-15 09:52:05.835 -07:00 [Information] User profile is available. Using '"C:\Users\KOLAWOLE\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2020-10-15 09:52:08.355 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/api/values  
2020-10-15 09:52:08.377 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/index.html  
2020-10-15 09:52:09.168 -07:00 [Information] Request finished in 826.5581ms 0 
2020-10-15 09:52:09.670 -07:00 [Information] Request finished in 1292.793ms 200 text/html;charset=utf-8
2020-10-15 09:52:12.102 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/v1/swagger.json  
2020-10-15 09:52:13.146 -07:00 [Information] Request finished in 1045.1617ms 200 application/json;charset=utf-8
2020-10-15 10:10:52.749 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2437
2020-10-15 10:10:52.806 -07:00 [Information] CORS policy execution failed.
2020-10-15 10:10:52.813 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 10:10:52.817 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 10:10:53.097 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 10:10:58.783 -07:00 [Warning] No type was specified for the decimal column '"Tax"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 10:10:58.784 -07:00 [Warning] No type was specified for the decimal column '"TaxPercent"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 10:10:58.787 -07:00 [Warning] No type was specified for the decimal column '"Amount"' on entity type '"Item"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 10:10:58.788 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 10:10:58.788 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 10:10:58.789 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 10:10:58.789 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 10:10:58.790 -07:00 [Warning] No type was specified for the decimal column '"NairaEquivalent"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 10:10:58.795 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountForeign"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 10:10:58.797 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountNaira"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 10:10:58.798 -07:00 [Warning] No type was specified for the decimal column '"CompetencyValue"' on entity type '"StaffSkillorKPI"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 10:10:59.052 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 10:11:03.490 -07:00 [Information] Executed DbCommand ("638"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:11:05.134 -07:00 [Information] Executed DbCommand ("49"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 10:11:05.354 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 10:11:05.583 -07:00 [Information] Executed DbCommand ("72"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:11:05.649 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 10:11:05.745 -07:00 [Information] Executed DbCommand ("85"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 10:11:05.855 -07:00 [Information] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 10:11:06.148 -07:00 [Information] Executed DbCommand ("65"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [CustomerID], [DatePaid], [InvoiceNo], [Method], [Reference], [SaleID], [UserCreated])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [ID]
FROM [Payments]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:11:06.365 -07:00 [Information] Executed DbCommand ("41"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:11:06.512 -07:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 10:11:06.613 -07:00 [Information] Executed DbCommand ("27"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 10:11:06.797 -07:00 [Information] Executed DbCommand ("58"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:11:06.963 -07:00 [Information] Executed DbCommand ("38"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:11:07.052 -07:00 [Information] Executed DbCommand ("27"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:11:07.089 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 10:11:07.181 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 14050.6669ms
2020-10-15 10:11:07.184 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 10:11:07.201 -07:00 [Information] Request finished in 14465.1104ms 200 application/json; charset=utf-8
2020-10-15 10:16:39.548 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 381
2020-10-15 10:16:39.643 -07:00 [Information] CORS policy execution failed.
2020-10-15 10:16:39.658 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 10:16:39.661 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 10:16:39.924 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 10:16:40.526 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 10:16:41.450 -07:00 [Information] Executed DbCommand ("203"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 10:16:41.813 -07:00 [Information] Executed DbCommand ("84"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 10:16:41.934 -07:00 [Information] Executed DbCommand ("62"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:16:41.983 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 10:16:42.010 -07:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 10:16:42.176 -07:00 [Information] Executed DbCommand ("102"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 10:16:42.198 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:16:42.247 -07:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 10:16:42.284 -07:00 [Information] Executed DbCommand ("19"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 10:16:42.363 -07:00 [Information] Executed DbCommand ("18"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:16:42.417 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 10:16:42.478 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 10:16:42.512 -07:00 [Information] Executed DbCommand ("33"ms) [Parameters=["@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [Balance] = @p1
WHERE [ID] = @p2;
SELECT @@ROWCOUNT;"
2020-10-15 10:16:42.607 -07:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 10:16:42.617 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 10:16:42.623 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 2696.1808ms
2020-10-15 10:16:42.625 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 10:16:42.627 -07:00 [Information] Request finished in 3082.7594ms 200 application/json; charset=utf-8
2020-10-15 10:18:13.274 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2438
2020-10-15 10:18:13.312 -07:00 [Information] CORS policy execution failed.
2020-10-15 10:18:13.313 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 10:18:13.314 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 10:18:13.481 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 10:18:13.809 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 10:18:14.143 -07:00 [Information] Executed DbCommand ("38"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:18:14.295 -07:00 [Information] Executed DbCommand ("30"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 10:18:14.349 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 10:18:14.466 -07:00 [Information] Executed DbCommand ("68"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:18:14.515 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 10:18:14.565 -07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 10:18:14.610 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 10:18:14.681 -07:00 [Information] Executed DbCommand ("49"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [CustomerID], [DatePaid], [InvoiceNo], [Method], [Reference], [SaleID], [UserCreated])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [ID]
FROM [Payments]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:18:14.797 -07:00 [Information] Executed DbCommand ("47"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:18:14.877 -07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 10:18:14.945 -07:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 10:18:14.998 -07:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:18:15.061 -07:00 [Information] Executed DbCommand ("31"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:18:15.096 -07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:18:15.149 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 10:18:15.152 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 1670.1632ms
2020-10-15 10:18:15.153 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 10:18:15.154 -07:00 [Information] Request finished in 1886.9737ms 200 application/json; charset=utf-8
2020-10-15 10:19:34.794 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 381
2020-10-15 10:19:34.796 -07:00 [Information] CORS policy execution failed.
2020-10-15 10:19:34.796 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 10:19:34.797 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 10:19:34.803 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 10:19:35.131 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 10:19:35.231 -07:00 [Information] Executed DbCommand ("50"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 10:19:35.515 -07:00 [Information] Executed DbCommand ("67"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 10:19:35.675 -07:00 [Information] Executed DbCommand ("62"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:19:35.698 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 10:19:35.818 -07:00 [Information] Executed DbCommand ("101"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 10:19:35.959 -07:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 10:19:35.996 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:19:36.025 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 10:19:36.046 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 10:19:36.094 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:19:36.111 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 10:19:36.137 -07:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 10:19:36.157 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2
WHERE [ID] = @p3;
SELECT @@ROWCOUNT;"
2020-10-15 10:19:36.298 -07:00 [Information] Executed DbCommand ("53"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 10:19:36.314 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 10:19:36.317 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 1512.7945ms
2020-10-15 10:19:36.318 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 10:19:36.320 -07:00 [Information] Request finished in 1527.5137ms 200 application/json; charset=utf-8
2020-10-15 10:22:28.760 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2438
2020-10-15 10:22:28.764 -07:00 [Information] CORS policy execution failed.
2020-10-15 10:22:28.788 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 10:22:28.791 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 10:22:28.792 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 10:22:28.857 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 10:22:29.076 -07:00 [Information] Executed DbCommand ("88"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:22:29.247 -07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 10:22:29.530 -07:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 10:22:29.779 -07:00 [Information] Executed DbCommand ("26"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:22:29.846 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 10:22:30.047 -07:00 [Information] Executed DbCommand ("155"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 10:22:30.593 -07:00 [Information] Executed DbCommand ("117"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 10:22:30.661 -07:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [CustomerID], [DatePaid], [InvoiceNo], [Method], [Reference], [SaleID], [UserCreated])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [ID]
FROM [Payments]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:22:30.862 -07:00 [Information] Executed DbCommand ("132"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:22:30.995 -07:00 [Information] Executed DbCommand ("24"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 10:22:31.063 -07:00 [Information] Executed DbCommand ("50"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 10:22:31.180 -07:00 [Information] Executed DbCommand ("66"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:22:31.243 -07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:22:31.344 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:22:31.379 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 10:22:31.383 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 2590.1566ms
2020-10-15 10:22:31.383 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 10:22:31.384 -07:00 [Information] Request finished in 2670.3512ms 200 application/json; charset=utf-8
2020-10-15 10:23:15.026 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 381
2020-10-15 10:23:15.038 -07:00 [Information] CORS policy execution failed.
2020-10-15 10:23:15.040 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 10:23:15.041 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 10:23:15.044 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 10:23:15.077 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 10:23:15.599 -07:00 [Information] Executed DbCommand ("443"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 10:23:15.627 -07:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 10:23:15.750 -07:00 [Information] Executed DbCommand ("39"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:23:15.844 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 10:23:15.955 -07:00 [Information] Executed DbCommand ("64"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 10:23:16.008 -07:00 [Information] Executed DbCommand ("11"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 10:23:16.060 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:23:16.136 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 10:23:16.153 -07:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 10:23:16.172 -07:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 10:23:16.192 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 10:23:16.206 -07:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 10:23:16.225 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [Balance] = @p1
WHERE [ID] = @p2;
SELECT @@ROWCOUNT;"
2020-10-15 10:23:16.355 -07:00 [Information] Executed DbCommand ("98"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 10:23:16.364 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 10:23:16.367 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 1322.0016ms
2020-10-15 10:23:16.368 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 10:23:16.369 -07:00 [Information] Request finished in 1343.8546ms 200 application/json; charset=utf-8
2020-10-15 11:42:49.780 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2438
2020-10-15 11:42:49.793 -07:00 [Information] CORS policy execution failed.
2020-10-15 11:42:49.793 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 11:42:49.795 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 11:42:49.805 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 11:42:49.845 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 11:42:50.008 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 11:42:50.072 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 11:42:50.096 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 11:42:50.137 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 11:42:50.180 -07:00 [Information] Executed DbCommand ("19"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 11:42:50.209 -07:00 [Information] Executed DbCommand ("11"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 11:42:50.238 -07:00 [Information] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 11:42:50.276 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [CustomerID], [DatePaid], [InvoiceNo], [Method], [Reference], [SaleID], [UserCreated])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [ID]
FROM [Payments]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 11:42:50.339 -07:00 [Information] Executed DbCommand ("36"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 11:42:50.377 -07:00 [Information] Executed DbCommand ("11"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 11:42:50.461 -07:00 [Information] Executed DbCommand ("65"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 11:42:50.492 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 11:42:50.640 -07:00 [Information] Executed DbCommand ("45"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 11:42:50.955 -07:00 [Information] Executed DbCommand ("144"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 11:42:51.077 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 11:42:51.080 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 1274.1618ms
2020-10-15 11:42:51.080 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 11:42:51.082 -07:00 [Information] Request finished in 1302.6675ms 200 application/json; charset=utf-8
2020-10-15 12:06:06.061 -07:00 [Information] User profile is available. Using '"C:\Users\KOLAWOLE\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2020-10-15 12:06:07.394 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/api/values  
2020-10-15 12:06:08.374 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/index.html  
2020-10-15 12:06:08.544 -07:00 [Information] Request finished in 1083.2693ms 404 
2020-10-15 12:06:08.793 -07:00 [Information] Request finished in 418.791ms 200 text/html;charset=utf-8
2020-10-15 12:06:10.873 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/v1/swagger.json  
2020-10-15 12:06:11.789 -07:00 [Information] Request finished in 919.2593ms 200 application/json;charset=utf-8
2020-10-15 12:08:16.279 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2438
2020-10-15 12:08:16.631 -07:00 [Information] CORS policy execution failed.
2020-10-15 12:08:16.632 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 12:08:16.703 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 12:08:17.129 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 12:08:23.395 -07:00 [Warning] No type was specified for the decimal column '"Tax"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 12:08:23.396 -07:00 [Warning] No type was specified for the decimal column '"TaxPercent"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 12:08:23.397 -07:00 [Warning] No type was specified for the decimal column '"Amount"' on entity type '"Item"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 12:08:23.398 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 12:08:23.398 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 12:08:23.398 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 12:08:23.399 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 12:08:23.399 -07:00 [Warning] No type was specified for the decimal column '"NairaEquivalent"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 12:08:23.400 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountForeign"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 12:08:23.401 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountNaira"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 12:08:23.402 -07:00 [Warning] No type was specified for the decimal column '"CompetencyValue"' on entity type '"StaffSkillorKPI"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 12:08:23.868 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 12:08:29.154 -07:00 [Information] Executed DbCommand ("511"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 12:08:30.386 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 12:08:30.567 -07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 12:08:30.681 -07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 12:08:30.725 -07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 12:08:30.739 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 12:08:30.839 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 12:08:31.102 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [CustomerID], [DatePaid], [InvoiceNo], [Method], [Reference], [SaleID], [UserCreated])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [ID]
FROM [Payments]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 12:08:31.408 -07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 12:08:31.551 -07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 12:08:31.655 -07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 12:08:31.842 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 12:08:32.006 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 12:08:32.089 -07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 12:08:32.136 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 12:08:32.188 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 15020.0265ms
2020-10-15 12:08:32.191 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 12:08:32.219 -07:00 [Information] Request finished in 15945.4131ms 200 application/json; charset=utf-8
2020-10-15 12:09:02.686 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 381
2020-10-15 12:09:02.703 -07:00 [Information] CORS policy execution failed.
2020-10-15 12:09:02.705 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 12:09:02.709 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 12:09:02.842 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 12:09:03.841 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 12:09:05.051 -07:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 12:09:05.333 -07:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 12:09:05.532 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 12:09:05.572 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 12:09:05.608 -07:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 12:09:05.670 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 12:09:05.702 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 12:09:05.726 -07:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 12:09:05.752 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 12:09:05.903 -07:00 [Information] Executed DbCommand ("27"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 12:09:06.006 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 12:09:06.051 -07:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 12:09:06.087 -07:00 [Information] Executed DbCommand ("34"ms) [Parameters=["@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [Balance] = @p1
WHERE [ID] = @p2;
SELECT @@ROWCOUNT;"
2020-10-15 12:09:06.222 -07:00 [Information] Executed DbCommand ("63"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 12:09:06.232 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 12:09:06.236 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 3381.4134ms
2020-10-15 12:09:06.237 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 12:09:06.237 -07:00 [Information] Request finished in 3552.1263ms 200 application/json; charset=utf-8
2020-10-15 14:12:30.994 -07:00 [Information] User profile is available. Using '"C:\Users\KOLAWOLE\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2020-10-15 14:12:32.317 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/api/values  
2020-10-15 14:12:32.317 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/index.html  
2020-10-15 14:12:33.085 -07:00 [Information] Request finished in 779.4767ms 0 
2020-10-15 14:12:33.187 -07:00 [Information] Request finished in 870.9016ms 200 text/html;charset=utf-8
2020-10-15 14:12:34.828 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/v1/swagger.json  
2020-10-15 14:12:35.772 -07:00 [Information] Request finished in 951.9936ms 200 application/json;charset=utf-8
2020-10-15 14:13:29.673 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2438
2020-10-15 14:13:29.747 -07:00 [Information] CORS policy execution failed.
2020-10-15 14:13:29.748 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 14:13:29.751 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 14:13:30.817 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 14:13:41.105 -07:00 [Warning] No type was specified for the decimal column '"Tax"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 14:13:41.106 -07:00 [Warning] No type was specified for the decimal column '"TaxPercent"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 14:13:41.106 -07:00 [Warning] No type was specified for the decimal column '"Amount"' on entity type '"Item"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 14:13:41.106 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 14:13:41.112 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 14:13:41.113 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 14:13:41.114 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 14:13:41.115 -07:00 [Warning] No type was specified for the decimal column '"NairaEquivalent"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 14:13:41.118 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountForeign"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 14:13:41.119 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountNaira"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 14:13:41.119 -07:00 [Warning] No type was specified for the decimal column '"CompetencyValue"' on entity type '"StaffSkillorKPI"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 14:13:41.499 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 14:13:44.753 -07:00 [Information] Executed DbCommand ("383"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 14:13:46.230 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 14:13:46.435 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 14:13:46.603 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 14:13:46.671 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 14:13:46.702 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 14:13:46.801 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 14:13:46.967 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [CustomerID], [DatePaid], [InvoiceNo], [Method], [Reference], [SaleID], [UserCreated])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [ID]
FROM [Payments]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 14:13:47.182 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 14:13:47.285 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 14:13:47.382 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 14:13:47.548 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 14:13:47.665 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 14:13:47.731 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 14:13:47.769 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 14:13:47.818 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 16969.1107ms
2020-10-15 14:13:47.820 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 14:13:47.840 -07:00 [Information] Request finished in 18168.3543ms 200 application/json; charset=utf-8
2020-10-15 14:38:26.915 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 381
2020-10-15 14:38:27.018 -07:00 [Information] CORS policy execution failed.
2020-10-15 14:38:27.028 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 14:38:27.031 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 14:38:27.129 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 14:38:27.383 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 14:38:28.010 -07:00 [Information] Executed DbCommand ("41"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 14:38:28.229 -07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 14:38:28.262 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 14:38:28.302 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 14:38:28.346 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 14:38:28.398 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 14:38:28.429 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 14:38:28.486 -07:00 [Information] Executed DbCommand ("48"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 14:38:28.514 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 14:38:28.574 -07:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 14:38:28.635 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 14:38:28.677 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 14:38:28.697 -07:00 [Information] Executed DbCommand ("18"ms) [Parameters=["@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Boolean)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [Balance] = @p1, [IsPaid] = @p2
WHERE [ID] = @p3;
SELECT @@ROWCOUNT;"
2020-10-15 14:38:28.777 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 14:38:28.782 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 14:38:28.785 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 1654.8799ms
2020-10-15 14:38:28.786 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 14:38:28.787 -07:00 [Information] Request finished in 1874.415ms 200 application/json; charset=utf-8
2020-10-15 15:13:39.469 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2289
2020-10-15 15:13:39.606 -07:00 [Information] CORS policy execution failed.
2020-10-15 15:13:39.607 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 15:13:39.673 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 15:13:39.767 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 15:13:40.353 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 15:13:40.939 -07:00 [Information] Executed DbCommand ("120"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:13:41.124 -07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 15:13:41.189 -07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 15:13:41.252 -07:00 [Information] Executed DbCommand ("30"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:13:41.304 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 15:13:41.340 -07:00 [Information] Executed DbCommand ("20"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 15:13:41.436 -07:00 [Information] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 15:13:41.553 -07:00 [Information] Executed DbCommand ("99"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:13:41.621 -07:00 [Information] Executed DbCommand ("39"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 15:13:41.684 -07:00 [Information] Executed DbCommand ("32"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 15:13:41.750 -07:00 [Information] Executed DbCommand ("31"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:13:41.805 -07:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:13:41.936 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:13:42.024 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 15:13:42.030 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 2261.3488ms
2020-10-15 15:13:42.031 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 15:13:42.031 -07:00 [Information] Request finished in 2565.4533ms 200 application/json; charset=utf-8
2020-10-15 15:15:43.953 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 381
2020-10-15 15:15:43.955 -07:00 [Information] CORS policy execution failed.
2020-10-15 15:15:43.961 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 15:15:43.963 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 15:15:43.965 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 15:15:43.978 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 15:15:44.019 -07:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 15:15:44.214 -07:00 [Information] Executed DbCommand ("164"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 15:15:44.388 -07:00 [Information] Executed DbCommand ("82"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:15:44.546 -07:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 15:15:44.582 -07:00 [Information] Executed DbCommand ("19"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 15:15:44.666 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 15:15:44.713 -07:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:15:44.762 -07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 15:15:44.782 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 15:15:44.819 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:15:44.849 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 15:15:44.882 -07:00 [Information] Executed DbCommand ("25"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 15:15:44.902 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Boolean)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [Balance] = @p1, [IsPaid] = @p2
WHERE [ID] = @p3;
SELECT @@ROWCOUNT;"
2020-10-15 15:15:45.115 -07:00 [Information] Executed DbCommand ("80"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 15:15:45.121 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 15:15:45.127 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 1161.6441ms
2020-10-15 15:15:45.128 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 15:15:45.128 -07:00 [Information] Request finished in 1176.1699ms 200 application/json; charset=utf-8
2020-10-15 15:17:23.712 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2289
2020-10-15 15:17:23.787 -07:00 [Information] CORS policy execution failed.
2020-10-15 15:17:23.803 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 15:17:23.804 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 15:17:23.813 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 15:17:23.857 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 15:17:24.008 -07:00 [Information] Executed DbCommand ("83"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:17:24.046 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 15:17:24.112 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 15:17:24.182 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:17:24.201 -07:00 [Information] Executed DbCommand ("11"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 15:17:24.231 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 15:17:24.291 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 15:17:24.317 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:17:24.537 -07:00 [Information] Executed DbCommand ("78"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 15:17:24.647 -07:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 15:17:24.684 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:17:24.718 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:17:24.769 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:17:24.784 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 15:17:24.786 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 972.3134ms
2020-10-15 15:17:24.786 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 15:17:24.787 -07:00 [Information] Request finished in 1074.9239ms 200 application/json; charset=utf-8
2020-10-15 15:18:45.114 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 381
2020-10-15 15:18:45.117 -07:00 [Information] CORS policy execution failed.
2020-10-15 15:18:45.118 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 15:18:45.119 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 15:18:45.122 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 15:18:45.149 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 15:18:45.282 -07:00 [Information] Executed DbCommand ("121"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 15:18:45.384 -07:00 [Information] Executed DbCommand ("53"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 15:18:45.513 -07:00 [Information] Executed DbCommand ("113"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:18:45.636 -07:00 [Information] Executed DbCommand ("26"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 15:18:45.661 -07:00 [Information] Executed DbCommand ("11"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 15:18:45.730 -07:00 [Information] Executed DbCommand ("29"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 15:18:45.762 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:18:45.781 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 15:18:45.801 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 15:18:45.950 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:18:46.050 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 15:18:46.097 -07:00 [Information] Executed DbCommand ("11"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 15:18:46.150 -07:00 [Information] Executed DbCommand ("49"ms) [Parameters=["@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Boolean)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [Balance] = @p1, [IsPaid] = @p2
WHERE [ID] = @p3;
SELECT @@ROWCOUNT;"
2020-10-15 15:18:46.216 -07:00 [Information] Executed DbCommand ("33"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 15:18:46.250 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 15:18:46.252 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 1127.2452ms
2020-10-15 15:18:46.253 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 15:18:46.256 -07:00 [Information] Request finished in 1142.9301ms 200 application/json; charset=utf-8
2020-10-15 15:26:12.712 -07:00 [Information] User profile is available. Using '"C:\Users\KOLAWOLE\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2020-10-15 15:26:13.886 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/api/values  
2020-10-15 15:26:14.810 -07:00 [Information] Request finished in 932.3315ms 404 
2020-10-15 15:27:06.609 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/index.html  
2020-10-15 15:27:06.805 -07:00 [Information] Request finished in 196.2225ms 200 text/html;charset=utf-8
2020-10-15 15:27:08.748 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/v1/swagger.json  
2020-10-15 15:27:09.729 -07:00 [Information] Request finished in 983.3037ms 200 application/json;charset=utf-8
2020-10-15 15:27:35.282 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2289
2020-10-15 15:27:35.456 -07:00 [Information] CORS policy execution failed.
2020-10-15 15:27:35.457 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 15:27:35.462 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 15:27:36.906 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 15:27:45.885 -07:00 [Warning] No type was specified for the decimal column '"Tax"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 15:27:45.885 -07:00 [Warning] No type was specified for the decimal column '"TaxPercent"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 15:27:45.886 -07:00 [Warning] No type was specified for the decimal column '"Amount"' on entity type '"Item"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 15:27:45.886 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 15:27:45.886 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 15:27:45.887 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 15:27:45.888 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 15:27:45.888 -07:00 [Warning] No type was specified for the decimal column '"NairaEquivalent"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 15:27:45.888 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountForeign"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 15:27:45.889 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountNaira"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 15:27:45.889 -07:00 [Warning] No type was specified for the decimal column '"CompetencyValue"' on entity type '"StaffSkillorKPI"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 15:27:46.106 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 15:27:56.477 -07:00 [Information] Executed DbCommand ("845"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:28:01.955 -07:00 [Information] Executed DbCommand ("27"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 15:28:02.322 -07:00 [Information] Executed DbCommand ("30"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 15:28:02.573 -07:00 [Information] Executed DbCommand ("19"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:28:02.661 -07:00 [Information] Executed DbCommand ("19"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 15:28:02.723 -07:00 [Information] Executed DbCommand ("32"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 15:28:03.092 -07:00 [Information] Executed DbCommand ("35"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 15:28:03.620 -07:00 [Information] Executed DbCommand ("46"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:28:03.743 -07:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 15:28:04.705 -07:00 [Information] Executed DbCommand ("39"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 15:28:04.957 -07:00 [Information] Executed DbCommand ("30"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:28:05.174 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:28:05.443 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:28:05.708 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 15:28:06.143 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 28884.6743ms
2020-10-15 15:28:06.338 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 15:28:06.378 -07:00 [Information] Request finished in 31148.9825ms 200 application/json; charset=utf-8
2020-10-15 15:28:33.894 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 381
2020-10-15 15:28:33.921 -07:00 [Information] CORS policy execution failed.
2020-10-15 15:28:33.923 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 15:28:34.082 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 15:28:34.436 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 15:28:34.912 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 15:28:35.518 -07:00 [Information] Executed DbCommand ("41"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 15:28:35.776 -07:00 [Information] Executed DbCommand ("31"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 15:28:35.822 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:28:35.868 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 15:28:35.906 -07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 15:28:35.973 -07:00 [Information] Executed DbCommand ("33"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 15:28:36.027 -07:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:28:36.059 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 15:28:36.103 -07:00 [Information] Executed DbCommand ("26"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 15:28:36.160 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 15:28:36.202 -07:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 15:28:36.239 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 15:28:36.253 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Boolean)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [Balance] = @p1, [IsPaid] = @p2
WHERE [ID] = @p3;
SELECT @@ROWCOUNT;"
2020-10-15 15:28:36.322 -07:00 [Information] Executed DbCommand ("18"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 15:28:36.326 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 15:28:36.329 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 1891.5098ms
2020-10-15 15:28:36.330 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 15:28:36.331 -07:00 [Information] Request finished in 2453.7733ms 200 application/json; charset=utf-8
2020-10-15 16:50:55.040 -07:00 [Information] User profile is available. Using '"C:\Users\KOLAWOLE\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2020-10-15 16:50:57.758 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/index.html  
2020-10-15 16:50:57.758 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/api/values  
2020-10-15 16:50:58.659 -07:00 [Information] Request finished in 884.3866ms 0 
2020-10-15 16:50:59.319 -07:00 [Information] Request finished in 1579.7459ms 200 text/html;charset=utf-8
2020-10-15 16:51:00.805 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/v1/swagger.json  
2020-10-15 16:51:02.140 -07:00 [Information] Request finished in 1341.3294ms 200 application/json;charset=utf-8
2020-10-15 16:51:26.276 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2289
2020-10-15 16:51:26.732 -07:00 [Information] CORS policy execution failed.
2020-10-15 16:51:26.941 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 16:51:27.076 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 16:51:28.256 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 16:52:07.942 -07:00 [Warning] No type was specified for the decimal column '"Tax"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:52:08.174 -07:00 [Warning] No type was specified for the decimal column '"TaxPercent"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:52:08.455 -07:00 [Warning] No type was specified for the decimal column '"Amount"' on entity type '"Item"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:52:08.668 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:52:08.804 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:52:09.107 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:52:09.154 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:52:09.286 -07:00 [Warning] No type was specified for the decimal column '"NairaEquivalent"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:52:09.316 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountForeign"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:52:09.337 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountNaira"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:52:09.371 -07:00 [Warning] No type was specified for the decimal column '"CompetencyValue"' on entity type '"StaffSkillorKPI"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:52:09.758 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 16:52:15.257 -07:00 [Information] Executed DbCommand ("537"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:52:26.690 -07:00 [Information] Executed DbCommand ("87"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 16:52:27.373 -07:00 [Information] Executed DbCommand ("117"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 16:52:27.749 -07:00 [Information] Executed DbCommand ("41"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:52:27.940 -07:00 [Information] Executed DbCommand ("49"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 16:52:28.155 -07:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 16:52:28.439 -07:00 [Information] Executed DbCommand ("65"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 16:52:53.399 -07:00 [Information] Executed DbCommand ("134"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:52:53.715 -07:00 [Information] Executed DbCommand ("18"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 16:52:53.823 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 16:52:55.387 -07:00 [Information] Executed DbCommand ("616"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:52:55.890 -07:00 [Information] Executed DbCommand ("86"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:52:56.606 -07:00 [Information] Executed DbCommand ("199"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:52:56.818 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 16:52:57.100 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 88588.3282ms
2020-10-15 16:52:57.200 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 16:52:57.412 -07:00 [Information] Request finished in 90964.8963ms 200 application/json; charset=utf-8
2020-10-15 16:54:37.072 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 382
2020-10-15 16:54:37.374 -07:00 [Information] CORS policy execution failed.
2020-10-15 16:54:37.448 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 16:54:37.482 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 16:54:37.924 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 16:54:45.805 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 16:54:47.053 -07:00 [Information] Executed DbCommand ("369"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 16:55:11.554 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 33605.6775ms
2020-10-15 16:55:11.654 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 16:55:12.763 -07:00 [Error] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at CRMSystem.Domains.SaleService.CreateRefund(ReturnedStock data) in C:\Users\KOLAWOLE\source\repos\kolatcole\TunnexCRM\CRMSystem.Domains.Core\Implementations\SaleService.cs:line 376
   at CRMSystem.Presentation.SaleController.ReturnProduct(ReturnedStock data) in C:\Users\KOLAWOLE\source\repos\kolatcole\TunnexCRM\TunnexCRM\Controllers\SaleController.cs:line 150
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-10-15 16:55:13.773 -07:00 [Information] Request finished in 36886.7525ms 500 text/plain
2020-10-15 16:55:21.951 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 381
2020-10-15 16:55:22.097 -07:00 [Information] CORS policy execution failed.
2020-10-15 16:55:22.383 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 16:55:22.980 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 16:55:24.721 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 16:55:25.088 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 16:55:25.286 -07:00 [Information] Executed DbCommand ("54"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 16:55:26.105 -07:00 [Information] Executed DbCommand ("49"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 16:55:36.369 -07:00 [Information] Executed DbCommand ("139"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:55:37.067 -07:00 [Information] Executed DbCommand ("441"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 16:55:37.114 -07:00 [Information] Executed DbCommand ("19"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 16:55:37.314 -07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 16:55:37.451 -07:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:55:50.814 -07:00 [Information] Executed DbCommand ("180"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 16:55:51.355 -07:00 [Information] Executed DbCommand ("90"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 16:55:51.871 -07:00 [Information] Executed DbCommand ("52"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:57:53.430 -07:00 [Information] User profile is available. Using '"C:\Users\KOLAWOLE\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2020-10-15 16:57:54.545 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/index.html  
2020-10-15 16:57:54.545 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/api/values  
2020-10-15 16:57:55.118 -07:00 [Information] Request finished in 597.62ms 0 
2020-10-15 16:57:55.246 -07:00 [Information] Request finished in 766.2272ms 200 text/html;charset=utf-8
2020-10-15 16:57:56.433 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/v1/swagger.json  
2020-10-15 16:57:57.434 -07:00 [Information] Request finished in 1001.6295ms 200 application/json;charset=utf-8
2020-10-15 16:58:20.681 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2289
2020-10-15 16:58:21.934 -07:00 [Information] CORS policy execution failed.
2020-10-15 16:58:21.934 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 16:58:21.937 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 16:58:22.452 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 16:58:37.537 -07:00 [Warning] No type was specified for the decimal column '"Tax"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:58:37.540 -07:00 [Warning] No type was specified for the decimal column '"TaxPercent"' on entity type '"Invoice"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:58:37.540 -07:00 [Warning] No type was specified for the decimal column '"Amount"' on entity type '"Item"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:58:37.540 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:58:37.540 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Price"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:58:37.542 -07:00 [Warning] No type was specified for the decimal column '"CostPrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:58:37.543 -07:00 [Warning] No type was specified for the decimal column '"SalePrice"' on entity type '"Product"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:58:37.543 -07:00 [Warning] No type was specified for the decimal column '"NairaEquivalent"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:58:37.544 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountForeign"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:58:37.545 -07:00 [Warning] No type was specified for the decimal column '"TotalAmountNaira"' on entity type '"Purchase"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:58:37.545 -07:00 [Warning] No type was specified for the decimal column '"CompetencyValue"' on entity type '"StaffSkillorKPI"'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values using 'HasColumnType()'.
2020-10-15 16:58:38.093 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 16:58:42.915 -07:00 [Information] Executed DbCommand ("283"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:58:44.758 -07:00 [Information] Executed DbCommand ("32"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 16:58:45.042 -07:00 [Information] Executed DbCommand ("75"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 16:58:45.344 -07:00 [Information] Executed DbCommand ("64"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:58:45.563 -07:00 [Information] Executed DbCommand ("44"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 16:58:45.653 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 16:58:46.075 -07:00 [Information] Executed DbCommand ("126"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 16:58:46.480 -07:00 [Information] Executed DbCommand ("35"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:58:46.880 -07:00 [Information] Executed DbCommand ("34"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 16:58:47.140 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 16:58:47.282 -07:00 [Information] Executed DbCommand ("18"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:58:47.441 -07:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:58:47.536 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:58:47.601 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 16:58:47.632 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 25159.112ms
2020-10-15 16:58:47.634 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 16:58:47.644 -07:00 [Information] Request finished in 26965.2604ms 200 application/json; charset=utf-8
2020-10-15 16:59:19.718 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 381
2020-10-15 16:59:19.734 -07:00 [Information] CORS policy execution failed.
2020-10-15 16:59:19.736 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 16:59:19.738 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 16:59:19.865 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 16:59:20.165 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 16:59:21.062 -07:00 [Information] Executed DbCommand ("30"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 16:59:21.581 -07:00 [Information] Executed DbCommand ("132"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 16:59:21.645 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:59:21.686 -07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 16:59:21.714 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 16:59:21.787 -07:00 [Information] Executed DbCommand ("20"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 16:59:21.803 -07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:59:21.835 -07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 16:59:21.859 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 16:59:21.985 -07:00 [Information] Executed DbCommand ("33"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 16:59:22.097 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 16:59:22.130 -07:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 16:59:22.144 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [Balance] = @p1
WHERE [ID] = @p2;
SELECT @@ROWCOUNT;"
2020-10-15 16:59:22.300 -07:00 [Information] Executed DbCommand ("70"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 16:59:22.309 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 16:59:22.315 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 2447.5251ms
2020-10-15 16:59:22.315 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 16:59:22.316 -07:00 [Information] Request finished in 2599.2161ms 200 application/json; charset=utf-8
2020-10-15 17:01:56.956 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Product/SaveProduct application/json 275
2020-10-15 17:01:56.960 -07:00 [Information] CORS policy execution failed.
2020-10-15 17:01:56.960 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 17:01:56.961 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.ProductController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 17:01:56.984 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Product\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Product)" on controller "CRMSystem.Presentation.ProductController" ("CRMSystem.Presentation.Core").
2020-10-15 17:01:57.162 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 17:01:57.247 -07:00 [Information] Executed DbCommand ("58"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Products] ([CostPrice], [DateCreated], [DateModified], [Description], [Image], [Location], [Name], [Quantity], [SalePrice], [StockLevel], [TotalSold], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
SELECT [ID]
FROM [Products]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:01:57.276 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 17:01:57.278 -07:00 [Information] Executed action "CRMSystem.Presentation.ProductController.Save (CRMSystem.Presentation.Core)" in 287.2573ms
2020-10-15 17:01:57.278 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.ProductController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 17:01:57.279 -07:00 [Information] Request finished in 327.3618ms 200 application/json; charset=utf-8
2020-10-15 17:02:42.737 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2379
2020-10-15 17:02:42.744 -07:00 [Information] CORS policy execution failed.
2020-10-15 17:02:42.745 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 17:02:42.746 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 17:02:42.748 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 17:02:43.181 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 17:02:43.441 -07:00 [Information] Executed DbCommand ("52"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:02:43.667 -07:00 [Information] Executed DbCommand ("191"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:02:43.979 -07:00 [Information] Executed DbCommand ("103"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:02:44.114 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:02:44.201 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:02:44.310 -07:00 [Information] Executed DbCommand ("32"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:02:44.315 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:02:44.931 -07:00 [Information] Executed DbCommand ("235"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 17:02:45.233 -07:00 [Information] Executed DbCommand ("125"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 17:02:45.531 -07:00 [Information] Executed DbCommand ("77"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 17:02:45.680 -07:00 [Information] Executed DbCommand ("48"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:02:45.798 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 17:02:45.879 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 17:02:46.066 -07:00 [Information] Executed DbCommand ("83"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:02:46.215 -07:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:02:46.300 -07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:02:46.327 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:02:46.380 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 17:02:46.382 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 3631.8765ms
2020-10-15 17:02:46.383 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 17:02:46.383 -07:00 [Information] Request finished in 3647.0093ms 200 application/json; charset=utf-8
2020-10-15 17:04:37.180 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 471
2020-10-15 17:04:37.182 -07:00 [Information] CORS policy execution failed.
2020-10-15 17:04:37.191 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 17:04:37.193 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 17:04:37.211 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 17:04:37.280 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 17:04:37.462 -07:00 [Information] Executed DbCommand ("129"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 17:04:37.573 -07:00 [Information] Executed DbCommand ("76"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 17:04:37.631 -07:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:04:37.691 -07:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:04:37.746 -07:00 [Information] Executed DbCommand ("30"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:04:37.847 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 17:04:37.920 -07:00 [Information] Executed DbCommand ("33"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:04:37.961 -07:00 [Information] Executed DbCommand ("27"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:04:37.980 -07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 17:04:38.057 -07:00 [Information] Executed DbCommand ("27"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:04:38.077 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:04:38.098 -07:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 17:04:38.139 -07:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 17:04:38.196 -07:00 [Information] Executed DbCommand ("43"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:04:38.245 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 17:04:38.312 -07:00 [Information] Executed DbCommand ("48"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 17:04:38.345 -07:00 [Information] Executed DbCommand ("33"ms) [Parameters=["@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Boolean)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [Balance] = @p1, [IsPaid] = @p2
WHERE [ID] = @p3;
SELECT @@ROWCOUNT;"
2020-10-15 17:04:38.460 -07:00 [Information] Executed DbCommand ("62"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 17:04:38.465 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 17:04:38.470 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 1257.9221ms
2020-10-15 17:04:38.471 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 17:04:38.473 -07:00 [Information] Request finished in 1293.2407ms 200 application/json; charset=utf-8
2020-10-15 17:05:46.338 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2379
2020-10-15 17:05:46.341 -07:00 [Information] CORS policy execution failed.
2020-10-15 17:05:46.341 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 17:05:46.342 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 17:05:46.343 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 17:05:46.357 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 17:05:46.510 -07:00 [Information] Executed DbCommand ("50"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:05:46.547 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:05:46.580 -07:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:05:46.597 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:05:46.613 -07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:05:46.658 -07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:05:46.673 -07:00 [Information] Executed DbCommand ("11"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:05:46.694 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 17:05:46.722 -07:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 17:05:46.740 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 17:05:46.781 -07:00 [Information] Executed DbCommand ("20"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:05:46.813 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 17:05:46.839 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 17:05:46.889 -07:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:05:46.926 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:05:46.963 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:05:46.979 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:05:47.094 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 17:05:47.096 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 752.0698ms
2020-10-15 17:05:47.097 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 17:05:47.104 -07:00 [Information] Request finished in 760.8073ms 200 application/json; charset=utf-8
2020-10-15 17:06:10.123 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 471
2020-10-15 17:06:10.126 -07:00 [Information] CORS policy execution failed.
2020-10-15 17:06:10.127 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 17:06:10.128 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 17:06:10.129 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 17:06:10.325 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 17:06:10.640 -07:00 [Information] Executed DbCommand ("299"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 17:06:10.796 -07:00 [Information] Executed DbCommand ("91"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 17:06:11.187 -07:00 [Information] Executed DbCommand ("117"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:06:11.344 -07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:06:11.412 -07:00 [Information] Executed DbCommand ("26"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:06:11.563 -07:00 [Information] Executed DbCommand ("84"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 17:06:11.609 -07:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:06:11.659 -07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:06:11.707 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 17:06:11.795 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:06:11.812 -07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:06:11.858 -07:00 [Information] Executed DbCommand ("12"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 17:06:11.893 -07:00 [Information] Executed DbCommand ("25"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 17:06:11.943 -07:00 [Information] Executed DbCommand ("18"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:06:11.961 -07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 17:06:12.029 -07:00 [Information] Executed DbCommand ("50"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 17:06:12.058 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [Balance] = @p1
WHERE [ID] = @p2;
SELECT @@ROWCOUNT;"
2020-10-15 17:06:12.106 -07:00 [Information] Executed DbCommand ("31"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 17:06:12.119 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 17:06:12.123 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 1993.0633ms
2020-10-15 17:06:12.124 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 17:06:12.125 -07:00 [Information] Request finished in 2002.4169ms 200 application/json; charset=utf-8
2020-10-15 17:07:33.129 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/SaveSale application/json 2528
2020-10-15 17:07:33.135 -07:00 [Information] CORS policy execution failed.
2020-10-15 17:07:33.136 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 17:07:33.137 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 17:07:33.142 -07:00 [Information] Route matched with "{action = \"Save\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Save(CRMSystem.Domains.Sale)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 17:07:33.206 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 17:07:33.958 -07:00 [Information] Executed DbCommand ("687"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:07:34.475 -07:00 [Information] Executed DbCommand ("246"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:07:34.629 -07:00 [Information] Executed DbCommand ("62"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:07:34.861 -07:00 [Information] Executed DbCommand ("60"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:07:35.245 -07:00 [Information] Executed DbCommand ("332"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:07:35.758 -07:00 [Information] Executed DbCommand ("134"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:07:35.796 -07:00 [Information] Executed DbCommand ("35"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:07:36.174 -07:00 [Information] Executed DbCommand ("211"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 17:07:36.559 -07:00 [Information] Executed DbCommand ("218"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 17:07:36.650 -07:00 [Information] Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [i].[ID]
FROM [Invoices] AS [i]
ORDER BY [i].[ID] DESC"
2020-10-15 17:07:36.768 -07:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [CustomerID], [DatePaid], [InvoiceNo], [Method], [Reference], [SaleID], [UserCreated])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [ID]
FROM [Payments]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:07:36.807 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Invoices] ([Amount], [AmountPaid], [Balance], [CartID], [CashierID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [DiscountPercent], [ExtData], [InvoiceDate], [InvoiceNo], [IsDeleted], [IsPaid], [Tax], [TaxInclusive], [TaxName], [TaxPercent], [Type], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
SELECT [ID]
FROM [Invoices]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:07:36.826 -07:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [c].[ID], [c].[Address], [c].[DateCreated], [c].[DateModified], [c].[Email], [c].[FirstName], [c].[Gender], [c].[Image], [c].[LastName], [c].[Phone], [c].[TotalSales], [c].[UserCreated], [c].[UserModified]
FROM [Customers] AS [c]
WHERE [c].[ID] = @__p_0"
2020-10-15 17:07:36.843 -07:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@p12='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Customers] SET [Address] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Email] = @p3, [FirstName] = @p4, [Gender] = @p5, [Image] = @p6, [LastName] = @p7, [Phone] = @p8, [TotalSales] = @p9, [UserCreated] = @p10, [UserModified] = @p11
WHERE [ID] = @p12;
SELECT @@ROWCOUNT;"
2020-10-15 17:07:36.868 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Sales] ([CartID], [CustomerID], [DateCreated], [DateModified], [DeliveryFee], [InvoiceID], [IsDeleted], [LPO], [ReturnedStockID], [ToDeliver], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
SELECT [ID]
FROM [Sales]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:07:36.887 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Waybills] ([DateCreated], [InvoiceNo], [UserCreated], [customerID])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [Waybills]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:07:36.907 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:07:36.918 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [WaybillProducts] ([ProductID], [Quantity], [WaybillID])
VALUES (@p0, @p1, @p2);
SELECT [ID]
FROM [WaybillProducts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:07:36.924 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 17:07:36.926 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)" in 3783.5483ms
2020-10-15 17:07:36.926 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.Save (CRMSystem.Presentation.Core)"'
2020-10-15 17:07:36.927 -07:00 [Information] Request finished in 3798.2566ms 200 application/json; charset=utf-8
2020-10-15 17:08:19.190 -07:00 [Information] Request starting HTTP/2.0 POST https://localhost:44363/api/Sale/ReturnProduct application/json 471
2020-10-15 17:08:19.191 -07:00 [Information] CORS policy execution failed.
2020-10-15 17:08:19.191 -07:00 [Information] Request origin "https://localhost:44363" does not have permission to access the resource.
2020-10-15 17:08:19.192 -07:00 [Information] Executing endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 17:08:19.193 -07:00 [Information] Route matched with "{action = \"ReturnProduct\", controller = \"Sale\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReturnProduct(CRMSystem.Domains.ReturnedStock)" on controller "CRMSystem.Presentation.SaleController" ("CRMSystem.Presentation.Core").
2020-10-15 17:08:19.205 -07:00 [Information] Entity Framework Core "3.1.4" initialized '"TContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=CRMSystem.Presentation.Core "
2020-10-15 17:08:19.240 -07:00 [Information] Executed DbCommand ("29"ms) [Parameters=["@__invNumber_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID], [t].[CashierID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount0], [t].[Code], [t].[DateCreated0], [t].[DateModified0], [t].[TransactionType], [t].[UserCreated0], [t].[UserModified0], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [i].[ID], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID], [i].[CashierID], [i].[CustomerID], [i].[DateCreated], [i].[DateModified], [i].[DeliveryFee], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated], [i].[UserModified], [c].[ID] AS [ID0], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated0], [c].[DateModified] AS [DateModified0], [c].[TransactionType], [c].[UserCreated] AS [UserCreated0], [c].[UserModified] AS [UserModified0]
    FROM [Invoices] AS [i]
    INNER JOIN [Carts] AS [c] ON [i].[CartID] = [c].[ID]
    WHERE (([i].[InvoiceNo] = @__invNumber_0) AND ([i].[Type] = N'sale')) AND ([i].[IsDeleted] <> CAST(1 AS bit))
    ORDER BY [i].[DateCreated] DESC
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID0] = [i0].[CartID]
ORDER BY [t].[DateCreated] DESC, [t].[ID], [t].[ID0], [i0].[ID]"
2020-10-15 17:08:19.293 -07:00 [Information] Executed DbCommand ("40"ms) [Parameters=["@__invID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[ID], [t].[CartID], [t].[CustomerID], [t].[DateCreated], [t].[DateModified], [t].[DeliveryFee], [t].[InvoiceID], [t].[IsDeleted], [t].[LPO], [t].[ReturnedStockID], [t].[ToDeliver], [t].[UserCreated], [t].[UserModified], [t].[ID0], [t].[Amount], [t].[AmountPaid], [t].[Balance], [t].[CartID0], [t].[CashierID], [t].[CustomerID0], [t].[DateCreated0], [t].[DateModified0], [t].[DeliveryFee0], [t].[DiscountPercent], [t].[ExtData], [t].[InvoiceDate], [t].[InvoiceNo], [t].[IsDeleted0], [t].[IsPaid], [t].[Tax], [t].[TaxInclusive], [t].[TaxName], [t].[TaxPercent], [t].[Type], [t].[UserCreated0], [t].[UserModified0], [t].[ID1], [t].[Amount0], [t].[Code], [t].[DateCreated1], [t].[DateModified1], [t].[TransactionType], [t].[UserCreated1], [t].[UserModified1], [i0].[ID], [i0].[Amount], [i0].[CartID], [i0].[Code], [i0].[Name], [i0].[ProductID], [i0].[Quantity]
FROM (
    SELECT TOP(1) [s].[ID], [s].[CartID], [s].[CustomerID], [s].[DateCreated], [s].[DateModified], [s].[DeliveryFee], [s].[InvoiceID], [s].[IsDeleted], [s].[LPO], [s].[ReturnedStockID], [s].[ToDeliver], [s].[UserCreated], [s].[UserModified], [i].[ID] AS [ID0], [i].[Amount], [i].[AmountPaid], [i].[Balance], [i].[CartID] AS [CartID0], [i].[CashierID], [i].[CustomerID] AS [CustomerID0], [i].[DateCreated] AS [DateCreated0], [i].[DateModified] AS [DateModified0], [i].[DeliveryFee] AS [DeliveryFee0], [i].[DiscountPercent], [i].[ExtData], [i].[InvoiceDate], [i].[InvoiceNo], [i].[IsDeleted] AS [IsDeleted0], [i].[IsPaid], [i].[Tax], [i].[TaxInclusive], [i].[TaxName], [i].[TaxPercent], [i].[Type], [i].[UserCreated] AS [UserCreated0], [i].[UserModified] AS [UserModified0], [c].[ID] AS [ID1], [c].[Amount] AS [Amount0], [c].[Code], [c].[DateCreated] AS [DateCreated1], [c].[DateModified] AS [DateModified1], [c].[TransactionType], [c].[UserCreated] AS [UserCreated1], [c].[UserModified] AS [UserModified1]
    FROM [Sales] AS [s]
    INNER JOIN [Invoices] AS [i] ON [s].[InvoiceID] = [i].[ID]
    INNER JOIN [Carts] AS [c] ON [s].[CartID] = [c].[ID]
    WHERE ([s].[InvoiceID] = @__invID_0) AND ([s].[IsDeleted] = CAST(0 AS bit))
) AS [t]
LEFT JOIN [Items] AS [i0] ON [t].[ID1] = [i0].[CartID]
ORDER BY [t].[ID], [t].[ID0], [t].[ID1], [i0].[ID]"
2020-10-15 17:08:19.322 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Carts] ([Amount], [Code], [DateCreated], [DateModified], [TransactionType], [UserCreated], [UserModified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [ID]
FROM [Carts]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:08:19.337 -07:00 [Information] Executed DbCommand ("9"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:08:19.355 -07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:08:19.392 -07:00 [Information] Executed DbCommand ("19"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 17:08:19.409 -07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@__ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ID], [p].[CostPrice], [p].[DateCreated], [p].[DateModified], [p].[Description], [p].[Image], [p].[Location], [p].[Name], [p].[Quantity], [p].[SalePrice], [p].[StockLevel], [p].[TotalSold], [p].[UserCreated], [p].[UserModified]
FROM [Products] AS [p]
WHERE [p].[ID] = @__ID_0"
2020-10-15 17:08:19.457 -07:00 [Information] Executed DbCommand ("36"ms) [Parameters=["@p13='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [CostPrice] = @p0, [DateCreated] = @p1, [DateModified] = @p2, [Description] = @p3, [Image] = @p4, [Location] = @p5, [Name] = @p6, [Quantity] = @p7, [SalePrice] = @p8, [StockLevel] = @p9, [TotalSold] = @p10, [UserCreated] = @p11, [UserModified] = @p12
WHERE [ID] = @p13;
SELECT @@ROWCOUNT;"
2020-10-15 17:08:19.542 -07:00 [Information] Executed DbCommand ("53"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Items] SET [Amount] = @p0, [CartID] = @p1, [Code] = @p2, [Name] = @p3, [ProductID] = @p4, [Quantity] = @p5
WHERE [ID] = @p6;
SELECT @@ROWCOUNT;"
2020-10-15 17:08:19.607 -07:00 [Information] Executed DbCommand ("19"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:08:19.611 -07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Items] ([Amount], [CartID], [Code], [Name], [ProductID], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [ID]
FROM [Items]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:08:19.669 -07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 17:08:19.919 -07:00 [Information] Executed DbCommand ("227"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 17:08:20.167 -07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ReturnedStocks] ([CartID], [DateCreated], [InvoiceNo], [RefundAmount])
VALUES (@p0, @p1, @p2, @p3);
SELECT [ID]
FROM [ReturnedStocks]
WHERE @@ROWCOUNT = 1 AND [ID] = scope_identity();"
2020-10-15 17:08:20.409 -07:00 [Information] Executed DbCommand ("63"ms) [Parameters=["@__data_ID_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [c].[ID], [c].[Amount], [c].[Code], [c].[DateCreated], [c].[DateModified], [c].[TransactionType], [c].[UserCreated], [c].[UserModified]
FROM [Carts] AS [c]
WHERE [c].[ID] = @__data_ID_0"
2020-10-15 17:08:20.490 -07:00 [Information] Executed DbCommand ("41"ms) [Parameters=["@p7='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Carts] SET [Amount] = @p0, [Code] = @p1, [DateCreated] = @p2, [DateModified] = @p3, [TransactionType] = @p4, [UserCreated] = @p5, [UserModified] = @p6
WHERE [ID] = @p7;
SELECT @@ROWCOUNT;"
2020-10-15 17:08:20.588 -07:00 [Information] Executed DbCommand ("87"ms) [Parameters=["@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [Balance] = @p1
WHERE [ID] = @p2;
SELECT @@ROWCOUNT;"
2020-10-15 17:08:20.860 -07:00 [Information] Executed DbCommand ("147"ms) [Parameters=["@p22='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (DbType = Decimal), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Decimal), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Invoices] SET [Amount] = @p0, [AmountPaid] = @p1, [Balance] = @p2, [CartID] = @p3, [CashierID] = @p4, [CustomerID] = @p5, [DateCreated] = @p6, [DateModified] = @p7, [DeliveryFee] = @p8, [DiscountPercent] = @p9, [ExtData] = @p10, [InvoiceDate] = @p11, [InvoiceNo] = @p12, [IsDeleted] = @p13, [IsPaid] = @p14, [Tax] = @p15, [TaxInclusive] = @p16, [TaxName] = @p17, [TaxPercent] = @p18, [Type] = @p19, [UserCreated] = @p20, [UserModified] = @p21
WHERE [ID] = @p22;
SELECT @@ROWCOUNT;"
2020-10-15 17:08:20.927 -07:00 [Information] Executing ObjectResult, writing value of type '"System.Int32"'.
2020-10-15 17:08:20.929 -07:00 [Information] Executed action "CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)" in 1736.0607ms
2020-10-15 17:08:20.933 -07:00 [Information] Executed endpoint '"CRMSystem.Presentation.SaleController.ReturnProduct (CRMSystem.Presentation.Core)"'
2020-10-15 17:08:20.933 -07:00 [Information] Request finished in 1744.1738ms 200 application/json; charset=utf-8
2020-10-15 17:11:22.423 -07:00 [Information] User profile is available. Using '"C:\Users\KOLAWOLE\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2020-10-15 17:11:24.755 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/api/values  
2020-10-15 17:11:25.974 -07:00 [Information] Request finished in 1239.1704ms 404 
2020-10-15 17:13:09.274 -07:00 [Information] User profile is available. Using '"C:\Users\KOLAWOLE\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2020-10-15 17:13:10.140 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/api/values  
2020-10-15 17:13:10.891 -07:00 [Information] Request finished in 769.4646ms 404 
2020-10-15 17:13:18.124 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/index.html  
2020-10-15 17:13:18.319 -07:00 [Information] Request finished in 195.8539ms 200 text/html;charset=utf-8
2020-10-15 17:13:19.622 -07:00 [Information] Request starting HTTP/2.0 GET https://localhost:44363/swagger/v1/swagger.json  
2020-10-15 17:13:20.590 -07:00 [Information] Request finished in 968.4059ms 200 application/json;charset=utf-8
